<app-search-toolbar 
  [queryFromUrl]="queryText"
  (navigateBack)="onNavigateBack()"
  (performSearch)="onPerformSearch($event)"></app-search-toolbar>

<div class="prelude">
  <div class="results-info">
    <div *ngIf="!isBusy && !isInvalidQuery">{{ totalLength }} 个搜索结果, 耗时 {{ computationTimeMs }}ms</div>
  </div>
  <div class="options"><button mat-button color="primary" (click)="toggleAdvancedOptions()">高级搜索</button></div>
</div>
<app-phonology-composer *ngIf="showingAdvancedOptions"></app-phonology-composer>

<div *ngIf="isInvalidQuery">搜索格式不正确: {{ queryText }}</div>
<div *ngIf="!isInvalidQuery && results.length > 0" class="search-results-list">
  <ng-container *ngFor="let document of results">
    <app-mono-hanzi-result
      [document]="document"
      *ngIf="document._type == 'single'"
    ></app-mono-hanzi-result>
    <app-feng-result
    [document]="document"
      *ngIf="document._type == 'feng'"
    ></app-feng-result>
  </ng-container>
  <mat-paginator [length]="totalLength"
              [pageSize]="pageSize"
              [hidePageSize]="true"
              [pageIndex]="currentPageIndex"
              (page)="onPageChanged($event)">
  </mat-paginator>
</div>

<div class="result-message" *ngIf="!isInvalidQuery && !isBusy && results.length == 0">
  <p>没有 <span class="unihan-text" style="display: inline">{{ queryText }}</span> 的搜索结果 😔</p>
  <p>试一试不同的关键词和拼写方法，或者：</p>
  <p style="text-align: center;">
    <a mat-raised-button href="https://shimo.im/forms/qWhRrxYW6xWq9Wcc/fill" target="_blank">贡献新词条</a>
  </p>
</div>

<div class="result-message" *ngIf="isBusy">
  <h3>加载中...</h3>
</div>

